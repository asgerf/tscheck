set -e
selected_test=$1
testdir="../tscheck-tests"
decls=$(find $testdir -name "*.d.ts")
for decl in $decls
do
	prefix=${decl%*.d.ts}
	snapshot="$prefix.jsnap"
	name=$(basename $prefix)
	if [[ -f $snapshot ]]; then
		if [[ -z $selected_test || ($selected_test = $name) ]];
		then
			echo $name
			./tscheck.js $snapshot $decl >output/$name.txt --compact
		fi
	fi
	# snapshot="$name.jsnap"
	# ./tscheck.js $snapshot $decl
done
